
<div class="page-content" >
    <div class="page-header">
        <h1 class=" pull-left">电影列表 </h1>
        <div>
            <div class="pull-left col-md-2" style="height: 34px;line-height: 34px;">
                <input type="checkbox" data-flag="icheck" class="square-green"  value="1"  id="refresh" name="refresh"> 自动刷新?
            </div>
            <div class="dataTables_filter" id="searchDiv">
                <input placeholder="请输入片名" name="subjectMain" class="form-control" type="search" likeOption="true"/>
                <input placeholder="请输入年份" name="year" class="form-control" type="search" />
                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-btn-type="search">查询</button>
                    <button type="button" class="btn btn-default" data-btn-type="reset">重置</button>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-default" data-btn-type="add">新增</button>
                    <button type="button" class="btn btn-default" data-btn-type="edit">编辑</button>
                    <button type="button" class="btn btn-default" data-btn-type="delete">删除</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
            <!-- PAGE CONTENT BEGINS -->
            <table id="film_list" class="table table-bordered table-hover">
            </table>
            <!-- PAGE CONTENT ENDS -->
    </div><!-- /.row -->

</div><!-- /.page-content -->


<script>
    //tableId,queryId,conditionContainer
    var filmTable;
    var dataUrl ="${dataUrl}";
    $(function() {
        //init table and fill data
        filmTable = new CommonTable("film_list", dataUrl, "searchDiv");

        setInterval(function () {
           if ($("#refresh").is(':checked')) {
               refreshAuto();
           }else{
              // console.log("unchecked");
           }

        }, 5000);


        $(document).find('[data-flag="icheck"]').each(function () {
            var cls = $(this).attr("class") ? $(this).attr("class") : "square-green";
            $(this).iCheck(
                {
                    checkboxClass: 'icheckbox_' + cls,
                    radioClass: 'iradio_' + cls
                }
            ).on('ifChanged', function (e) {
                var field = $(this).attr('name');
            });
        });

    });




    function refreshAuto() {
        //console.log("refresh table");
        filmTable.reloadData();
    }


</script>